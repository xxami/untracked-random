
#region Description
/**
 * Title: Texploit
 * Description: Entry for the Moosader Gamedev Compo #7: "Text-based game"
 */
#endregion

using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Input;

namespace Texploit
{
    /// <summary>
    /// Synopsis specific game state handling for the main game class
    /// </summary>
    public partial class TexploitGame : Microsoft.Xna.Framework.Game
    {
        #region Fields

        #endregion

        #region Private Methods

        private void SynopsisState_Initialize()
        {
            if (this.state != GameState.SYNOPSIS_STATE) return;
            this.DrawInitialSynopsisScreen();
        }

        private void DrawInitialSynopsisScreen()
        {
            this.DrawBorder(1, 1, COLUMNS_MAX - 2, ROWS_MAX - 1);
            this.DrawBorder(3, 2, COLUMNS_MAX - 6, ROWS_MAX - 3);
            Rectangle bounds = new Rectangle(5, 4, COLUMNS_MAX - 10, ROWS_MAX - 7);
            this.SetCursorPosition(0, 0);
            this.Write2(bounds, this.current_level_synopsis, true);
        }

        private void SynopsisState_Update(KeyboardState key_state)
        {
            if (this.state != GameState.SYNOPSIS_STATE) return;
            if (key_state.IsKeyDown(Keys.Enter) && !this.key_state_prev.IsKeyDown(Keys.Enter))
                this.SynopsisState_SetNextState(GameState.LEVEL_STATE);
            if (key_state.IsKeyDown(Keys.Back) && !this.key_state_prev.IsKeyDown(Keys.Back))
                this.SynopsisState_SetNextState(GameState.LEVEL_STATE);
        }

        private void SynopsisState_Draw()
        {
            if (this.state != GameState.SYNOPSIS_STATE) return;
        }

        private void SynopsisState_SetNextState(GameState state)
        {
            this.state = state;
            this.SynopsisState_Destroy();
            this.InitializeUI();
        }

        private void SynopsisState_Destroy()
        {
            this.Clear(' ');
        }

        #endregion
    }
}
